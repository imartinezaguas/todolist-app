"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5332],{5332:(G,p,d)=>{d.r(p),d.d(p,{HomePageModule:()=>B});var v=d(2200),s=d(9420),k=d(4341),f=d(8132),l=d(467),e=d(3664),c=d(8728),L=d(369);let m=(()=>{class o{constructor(t){this.storage=t,this._storage=null,this.init()}init(){var t=this;return(0,l.A)(function*(){t._storage=yield t.storage.create()})()}ensureStorageReady(){var t=this;return(0,l.A)(function*(){t._storage||(t._storage=yield t.storage.create())})()}saveCategory(t,n){var i=this;return(0,l.A)(function*(){let a;yield i.ensureStorageReady(),a=n||{id:Date.now(),name:t,task:[]},yield i._storage?.set(t,a)})()}getCategory(t){var n=this;return(0,l.A)(function*(){return yield n.ensureStorageReady(),yield n._storage?.get(t)})()}getAllCategories(){var t=this;return(0,l.A)(function*(){yield t.ensureStorageReady();const n=(yield t._storage?.keys())??[],i=[];for(const a of n){const r=yield t._storage?.get(a);r&&i.push(r)}return i})()}removeCategory(t){var n=this;return(0,l.A)(function*(){yield n.ensureStorageReady(),yield n._storage?.remove(t)})()}static#t=this.\u0275fac=function(n){return new(n||o)(c.KVO(L.w))};static#e=this.\u0275prov=c.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var x=d(1836);let y=(()=>{class o{constructor(t){this.remoteConfig=t}isFeatureEnabled(t){var n=this;return(0,l.A)(function*(){return yield n.remoteConfig.fetchAndActivate(),(yield n.remoteConfig.getValue(t)).asBoolean()})()}static#t=this.\u0275fac=function(n){return new(n||o)(c.KVO(x.pk))};static#e=this.\u0275prov=c.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function T(o,u){if(1&o){const t=e.RV6();e.j41(0,"ion-button",3),e.bIt("click",function(){c.eBV(t);const i=e.XpG();return c.Njj(i.openModalTask(i.todoList))}),e.nrm(1,"ion-icon",6),e.k0s()}}function F(o,u){if(1&o){const t=e.RV6();e.j41(0,"ion-item-sliding")(1,"ion-item")(2,"ion-checkbox",7),e.bIt("ionChange",function(i){const a=c.eBV(t).$implicit,r=e.XpG(2);return c.Njj(r.completeTask(a,i.detail.checked))}),e.EFF(3),e.k0s()(),e.j41(4,"ion-item-options")(5,"ion-item-option",5),e.bIt("click",function(){const i=c.eBV(t).$implicit,a=e.XpG(2);return c.Njj(a.deleteTask(i))}),e.EFF(6,"Delete"),e.k0s()()()}if(2&o){const t=u.$implicit;e.R7$(2),e.Y8G("checked",t.complete),e.R7$(),e.JRh(t.title)}}function j(o,u){if(1&o&&e.Z7z(0,F,7,2,"ion-item-sliding",null,e.Vm6),2&o){const t=e.XpG();e.Dyx(t.todoList.task)}}let I=(()=>{class o{constructor(t,n,i){this.alerCtrl=t,this.storage=n,this.featureFlag=i,this.onCategoryDeleted=new e.bkB,this.enableAddTask=!1,this.isExpanded=!0}ngOnInit(){var t=this;return(0,l.A)(function*(){t.enableAddTask=yield t.featureFlag.isFeatureEnabled("enable_add_task")})()}editCategorie(){var t=this;return(0,l.A)(function*(){var i;yield(yield t.alerCtrl.create({header:"Edit Category",inputs:[{name:"newName",type:"text",placeholder:"New name",value:t.todoList.name}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Guardar",handler:(i=(0,l.A)(function*(a){const r=a.newName.trim().toUpperCase();if(!r||r===t.todoList.name)return;if(yield t.storage.getCategory(r))return void(yield(yield t.alerCtrl.create({header:"Error",message:`Don't exists that category "${r}"`,buttons:["OK"]})).present());const g=yield t.storage.getCategory(t.todoList.name);g.name=r,yield t.storage.saveCategory(r,g),yield t.storage.removeCategory(t.todoList.name),t.onCategoryDeleted.emit()}),function(r){return i.apply(this,arguments)})}]})).present()})()}openModalTask(t){var n=this;return(0,l.A)(function*(){var a;yield(yield n.alerCtrl.create({cssClass:"my-custom-class",header:"Add Task",mode:"ios",inputs:[{name:"key",type:"text",placeholder:"Name of task"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"primary",handler:()=>{console.log("Confirm cancel")}},{text:"Save",handler:(a=(0,l.A)(function*(r){const h=r.key.trim().toLowerCase(),g=yield n.storage.getCategory(t.name);if(h){const C={id:Date.now(),title:h,complete:!1,categoryId:t.id};g.task.push(C),yield n.storage.saveCategory(t.name,g),n.todoList.task=[...g.task]}}),function(h){return a.apply(this,arguments)})}]})).present()})()}completeTask(t,n){var i=this;return(0,l.A)(function*(){const a=yield i.storage.getCategory(i.todoList.name),r=a.task.findIndex(h=>h.id===t.id);r>-1&&(a.task[r].complete=n,yield i.storage.saveCategory(i.todoList.name,a),i.todoList.task=[...a.task])})()}deleteTask(t){var n=this;return(0,l.A)(function*(){const i=yield n.storage.getCategory(n.todoList.name);i.task=i.task.filter(a=>a.id!==t.id),yield n.storage.saveCategory(n.todoList.name,i),n.todoList.task=[...i.task]})()}deleteCategory(){var t=this;return(0,l.A)(function*(){var i;yield(yield t.alerCtrl.create({header:"Delete category",message:`\xbfSurely you want to delete the category "${t.todoList.name}"?`,buttons:[{text:"Cancelar",role:"cancel"},{text:"Delete",role:"destructive",handler:(i=(0,l.A)(function*(){yield t.storage.removeCategory(t.todoList.name),t.onCategoryDeleted.emit()}),function(){return i.apply(this,arguments)})}]})).present()})()}toggleCategory(){this.isExpanded=!this.isExpanded}static#t=this.\u0275fac=function(n){return new(n||o)(e.rXU(s.hG),e.rXU(m),e.rXU(y))};static#e=this.\u0275cmp=e.VBU({type:o,selectors:[["app-list"]],inputs:{todoList:"todoList"},outputs:{onCategoryDeleted:"onCategoryDeleted"},decls:12,vars:4,consts:[[3,"click"],["slot","end"],["fill","clear"],["fill","clear",3,"click"],["slot","icon-only","name","chevron-down-outline",3,"name"],["color","danger",3,"click"],["slot","icon-only","name","add-circle-outline"],["labelPlacement","end",3,"ionChange","checked"]],template:function(n,i){1&n&&(e.j41(0,"ion-item-sliding")(1,"ion-item")(2,"ion-label",0),e.bIt("click",function(){return i.editCategorie()}),e.EFF(3),e.k0s(),e.j41(4,"ion-buttons",1),e.nVh(5,T,2,0,"ion-button",2),e.j41(6,"ion-button",3),e.bIt("click",function(){return i.toggleCategory()}),e.nrm(7,"ion-icon",4),e.k0s()()(),e.j41(8,"ion-item-options")(9,"ion-item-option",5),e.bIt("click",function(){return i.deleteCategory()}),e.EFF(10,"Delete"),e.k0s()()(),e.nVh(11,j,2,0)),2&n&&(e.R7$(3),e.JRh(i.todoList.name),e.R7$(2),e.vxM(i.enableAddTask?5:-1),e.R7$(2),e.Y8G("name",i.isExpanded?"chevron-up-outline":"chevron-down-outline"),e.R7$(4),e.vxM(i.isExpanded?11:-1))},dependencies:[s.bv,s.Jm,s.QW,s.eY,s.iq,s.uz,s.LU,s.CE,s.A7,s.he,s.hB],encapsulation:2})}return o})();function S(o,u){if(1&o){const t=e.RV6();e.j41(0,"ion-searchbar",1),e.bIt("ionInput",function(i){c.eBV(t);const a=e.XpG();return c.Njj(a.handleInput(i))}),e.k0s()}}let E=(()=>{class o{constructor(t){this.featureFlag=t,this.onSearch=new e.bkB,this.searchBarEnabled=!1}ngOnInit(){var t=this;return(0,l.A)(function*(){t.searchBarEnabled=yield t.featureFlag.isFeatureEnabled("enable_search_bar")})()}handleInput(t){const n=t.detail.value.trim();this.onSearch.emit(n)}static#t=this.\u0275fac=function(n){return new(n||o)(e.rXU(y))};static#e=this.\u0275cmp=e.VBU({type:o,selectors:[["app-search"]],outputs:{onSearch:"onSearch"},decls:1,vars:1,consts:[["placeholder","Search Categories..."],["placeholder","Search Categories...",3,"ionInput"]],template:function(n,i){1&n&&e.nVh(0,S,1,0,"ion-searchbar",0),2&n&&e.vxM(i.searchBarEnabled?0:-1)},dependencies:[s.bv,s.S1,s.Gw],encapsulation:2})}return o})();function R(o,u){if(1&o){const t=e.RV6();e.j41(0,"ion-list")(1,"app-list",1),e.bIt("onCategoryDeleted",function(){c.eBV(t);const i=e.XpG();return c.Njj(i.refrescarCategorias())}),e.k0s()()}if(2&o){const t=u.$implicit;e.R7$(),e.Y8G("todoList",t)}}let _=(()=>{class o{constructor(t){this.storage=t,this.todoLists=[],this.filteredCategories=[]}ngOnInit(){}ngOnChanges(t){t.todoLists&&(this.filteredCategories=[...this.todoLists])}filterCategories(t){this.filteredCategories=this.todoLists.filter(n=>n.name.toLowerCase().includes(t.toLowerCase()))}refrescarCategorias(){var t=this;return(0,l.A)(function*(){const n=yield t.storage.getAllCategories();t.filteredCategories=[...n]})()}static#t=this.\u0275fac=function(n){return new(n||o)(e.rXU(m))};static#e=this.\u0275cmp=e.VBU({type:o,selectors:[["app-lists"]],inputs:{todoLists:"todoLists"},features:[e.OA$],decls:3,vars:0,consts:[[3,"onSearch"],[3,"onCategoryDeleted","todoList"]],template:function(n,i){1&n&&(e.j41(0,"app-search",0),e.bIt("onSearch",function(r){return i.filterCategories(r)}),e.k0s(),e.Z7z(1,R,2,1,"ion-list",null,e.Vm6)),2&n&&(e.R7$(),e.Dyx(i.filteredCategories))},dependencies:[s.bv,s.nf,I,E],encapsulation:2})}return o})();const D=[{path:"",component:(()=>{class o{constructor(t,n){this.alerCtrl=t,this.storage=n,this.todoList=[]}ngOnInit(){var t=this;return(0,l.A)(function*(){t.todoList=yield t.storage.getAllCategories()})()}openModalCategory(){var t=this;return(0,l.A)(function*(){var i;yield(yield t.alerCtrl.create({cssClass:"my-custom-class",header:"Add Category",mode:"ios",inputs:[{name:"key",type:"text",placeholder:"Name Of Category"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"primary",handler:()=>{}},{text:"Save",handler:(i=(0,l.A)(function*(a){const r=a.key.trim().toUpperCase();r&&(yield t.storage.saveCategory(r),t.todoList=yield t.storage.getAllCategories())}),function(r){return i.apply(this,arguments)})}]})).present()})()}static#t=this.\u0275fac=function(n){return new(n||o)(e.rXU(s.hG),e.rXU(m))};static#e=this.\u0275cmp=e.VBU({type:o,selectors:[["app-home"]],standalone:!1,decls:9,vars:3,consts:[[3,"translucent"],[3,"fullscreen"],[3,"todoLists"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"]],template:function(n,i){1&n&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3," TodoList "),e.k0s()()(),e.j41(4,"ion-content",1),e.nrm(5,"app-lists",2),e.j41(6,"ion-fab",3)(7,"ion-fab-button",4),e.bIt("click",function(){return i.openModalCategory()}),e.nrm(8,"ion-icon",5),e.k0s()()()),2&n&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("todoLists",i.todoList))},dependencies:[s.W9,s.Q8,s.YW,s.eU,s.iq,s.BC,s.ai,_],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]})}return o})()}];let V=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=e.$C({type:o});static#n=this.\u0275inj=c.G2t({imports:[f.iI.forChild(D),f.iI]})}return o})(),B=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=e.$C({type:o});static#n=this.\u0275inj=c.G2t({imports:[v.MD,k.YN,s.bv,V,_]})}return o})()}}]);